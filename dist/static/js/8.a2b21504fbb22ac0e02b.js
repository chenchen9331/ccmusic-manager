webpackJsonp([8],{"+Wu4":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i("BO1k"),n=i.n(o),a=i("gyMJ"),l={data:function(){return{visitDialog:!1,visitEditDialog:!1,visitDeleDialog:!1,pojo:{name:"",sex:"",birth:"",location:"",introduction:""},editPojo:{id:"",name:"",sex:"",birth:"",location:"",introduction:""},dataList:[],searchList:{name:""},currentPage:1,pageSize:5,idx:"-1",multipleSelection:[]}},created:function(){this.getAll()},computed:{data:function(){return this.dataList.slice((this.currentPage-1)*this.pageSize,this.currentPage*this.pageSize)}},mixins:[i("is1l").a],methods:{addSinger:function(){var t=this,e=this.pojo.birth,i=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate(),o=new URLSearchParams;o.append("name",this.pojo.name),o.append("sex",this.pojo.sex),o.append("birth",i),o.append("pic","/img/singerPic/hhh.jpg"),o.append("location",this.pojo.location),o.append("introduction",this.pojo.introduction),Object(a.y)(o).then(function(e){2e4==e.code?t.notify(e.message,"success"):t.notify(e.message,"error")}).catch(function(t){console.log(t)}),this.visitDialog=!1,this.getAll()},editData:function(t){this.visitEditDialog=!0,console.log(t.sex),this.editPojo={id:t.id,name:t.name,sex:t.sex,birth:t.birth,location:t.location,introduction:t.introduction}},editSinger:function(){var t=this,e=this.editPojo.birth,i=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate(),o=new URLSearchParams;o.append("id",this.editPojo.id),o.append("name",this.editPojo.name),o.append("sex",this.editPojo.sex),o.append("birth",i),o.append("location",this.editPojo.location),o.append("introduction",this.editPojo.introduction),Object(a.B)(o).then(function(e){2e4==e.code?t.notify(e.message,"success"):t.notify(e.message,"error")}).catch(function(t){console.log(t)}),this.visitEditDialog=!1,this.getAll()},searchSinger:function(){var t=this,e=new URLSearchParams;e.append("name",this.searchList.name),Object(a.v)(e).then(function(e){2e4==e.code&&(t.dataList=[],t.dataList=e.data)})},getAll:function(){var t=this;this.dataList=[],this.searchList=[],Object(a.f)().then(function(e){t.searchList=e.data,t.dataList=e.data})},uploadUrl:function(t){return this.$store.state.HOST+"/singer/updateAvator?id="+t},handleCurrentChange:function(t){this.currentPage=t},deleSinger:function(){var t=this;Object(a.c)(this.idx).then(function(e){2e4==e.code?(t.notify(e.message,"success"),t.visitDeleDialog=!1,t.getAll()):t.notify(e.message,"error")}).catch(function(t){console.log(t)})},deleteAll:function(){var t=this,e=!0,i=!1,o=void 0;try{for(var l,r=n()(this.multipleSelection);!(e=(l=r.next()).done);e=!0){var s=l.value;Object(a.c)(s.id).then(function(e){2e4==e.code?t.notify(e.message,"success"):t.notify(e.message,"error")}).catch(function(t){console.log(t)}),this.multipleSelection=[],this.getAll()}}catch(t){i=!0,o=t}finally{try{!e&&r.return&&r.return()}finally{if(i)throw o}}},songEdit:function(t,e){this.$router.push({path:"/Song",query:{id:t,name:e}})}}},r={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"table"},[i("div",{staticClass:"container"},[i("el-form",{ref:"searchList",staticClass:"form-search",attrs:{inline:!0,model:t.searchList,"label-width":"60px"}},[i("el-form-item",{attrs:{label:"姓名:"}},[i("el-input",{attrs:{placeholder:"请输入歌手姓名",size:"mini"},model:{value:t.searchList.name,callback:function(e){t.$set(t.searchList,"name",e)},expression:"searchList.name"}})],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.searchSinger()}}},[t._v("查询")]),t._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.visitDialog=!0}}},[t._v("添加")]),t._v(" "),i("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(e){return t.deleteAll()}}},[t._v("批量删除")])],1)],1)],1),t._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:t.data,size:"mini"},on:{"selection-change":t.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"40"}}),t._v(" "),i("el-table-column",{attrs:{label:"歌手图片",align:"center",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticClass:"singer-img"},[i("img",{staticStyle:{width:"100%"},attrs:{src:t.getUrl(e.row.pic)}})]),t._v(" "),i("el-upload",{attrs:{action:t.uploadUrl(e.row.id),"before-upload":t.beforeUploadAvator,"on-success":t.handleAvatorSuccess}},[i("el-button",{attrs:{size:"mini"}},[t._v("更新图片")])],1)]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"姓名",prop:"name",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{label:"性别",width:"50px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(t.changeSex(e.row.sex))+"\n            ")]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"出生日期",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(t.changeBirth(e.row.birth))+"\n            ")]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"地区",prop:"location",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{label:"简介",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("p",{staticStyle:{}},[t._v(t._s(t.changeIntroduction(e.row.introduction)))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){return t.songEdit(e.row.id,e.row.name)}}},[t._v("歌曲管理")]),t._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){return t.editData(e.row)}}},[t._v("修改")]),t._v(" "),i("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(i){return t.deleData(e.row.id)}}},[t._v("删除")])]}}])})],1),t._v(" "),i("div",{staticClass:"pagination"},[i("el-pagination",{attrs:{background:"",layout:"total,pager,prev,next","current-page":t.currentPage,"page-size":t.pageSize,total:t.dataList.length},on:{"current-change":t.handleCurrentChange}})],1),t._v(" "),i("el-dialog",{attrs:{title:"添加歌手",visible:t.visitDialog,width:"400px",center:""},on:{"update:visible":function(e){t.visitDialog=e}}},[i("el-form",{ref:"pojo",attrs:{model:t.pojo,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"姓名",prop:"name",size:"mini"}},[i("el-input",{attrs:{placeholder:"请输入歌手姓名"},model:{value:t.pojo.name,callback:function(e){t.$set(t.pojo,"name",e)},expression:"pojo.name"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"性别",size:"mini"}},[i("el-radio-group",{attrs:{size:"mini"},model:{value:t.pojo.sex,callback:function(e){t.$set(t.pojo,"sex",e)},expression:"pojo.sex"}},[i("el-radio",{attrs:{label:0}},[t._v("女")]),t._v(" "),i("el-radio",{attrs:{label:1}},[t._v("男")]),t._v(" "),i("el-radio",{attrs:{label:2}},[t._v("组合")])],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"出生日期",prop:"birth",size:"mini"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择出生日期"},model:{value:t.pojo.birth,callback:function(e){t.$set(t.pojo,"birth",e)},expression:"pojo.birth"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"区域",prop:"location",size:"mini"}},[i("el-input",{attrs:{placeholder:"请输入区域"},model:{value:t.pojo.location,callback:function(e){t.$set(t.pojo,"location",e)},expression:"pojo.location"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"简介",prop:"introduction",size:"mini"}},[i("el-input",{attrs:{type:"textarea",placeholder:"请输入歌手姓名"},model:{value:t.pojo.introduction,callback:function(e){t.$set(t.pojo,"introduction",e)},expression:"pojo.introduction"}})],1)],1),t._v(" "),i("span",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.addSinger()}}},[t._v("保存")]),t._v(" "),i("el-button",{attrs:{type:"info"},on:{click:function(e){t.visitDialog=!1}}},[t._v("关闭")])],1)],1),t._v(" "),i("el-dialog",{attrs:{title:"修改歌手",visible:t.visitEditDialog,width:"400px",center:""},on:{"update:visible":function(e){t.visitEditDialog=e}}},[i("el-form",{ref:"editPojo",attrs:{model:t.editPojo,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"姓名",prop:"name",size:"mini"}},[i("el-input",{attrs:{placeholder:"请输入歌手姓名"},model:{value:t.editPojo.name,callback:function(e){t.$set(t.editPojo,"name",e)},expression:"editPojo.name"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"性别",size:"mini"}},[i("el-radio-group",{attrs:{size:"mini"},model:{value:t.editPojo.sex,callback:function(e){t.$set(t.editPojo,"sex",e)},expression:"editPojo.sex"}},[i("el-radio",{attrs:{label:0}},[t._v("女")]),t._v(" "),i("el-radio",{attrs:{label:1}},[t._v("男")]),t._v(" "),i("el-radio",{attrs:{label:2}},[t._v("组合")])],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"出生日期",prop:"birth",size:"mini"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择出生日期"},model:{value:t.editPojo.birth,callback:function(e){t.$set(t.editPojo,"birth",e)},expression:"editPojo.birth"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"区域",prop:"location",size:"mini"}},[i("el-input",{attrs:{placeholder:"请输入区域"},model:{value:t.editPojo.location,callback:function(e){t.$set(t.editPojo,"location",e)},expression:"editPojo.location"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"简介",prop:"introduction",size:"mini"}},[i("el-input",{attrs:{type:"textarea",placeholder:"请输入歌手姓名"},model:{value:t.editPojo.introduction,callback:function(e){t.$set(t.editPojo,"introduction",e)},expression:"editPojo.introduction"}})],1)],1),t._v(" "),i("span",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.editSinger()}}},[t._v("保存")]),t._v(" "),i("el-button",{attrs:{type:"info"},on:{click:function(e){t.visitEditDialog=!1}}},[t._v("关闭")])],1)],1),t._v(" "),i("el-dialog",{attrs:{title:"删除歌手",visible:t.visitDeleDialog,width:"400px",center:""},on:{"update:visible":function(e){t.visitDeleDialog=e}}},[i("div",[t._v("是否确定执行删除操作？")]),t._v(" "),i("span",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"danger"},on:{click:function(e){return t.deleSinger()}}},[t._v("是")]),t._v(" "),i("el-button",{attrs:{type:"info"},on:{click:function(e){t.visitEditDialog=!1}}},[t._v("否")])],1)])],1)},staticRenderFns:[]};var s=i("VU/8")(l,r,!1,function(t){i("POuu")},"data-v-0815d631",null);e.default=s.exports},POuu:function(t,e){}});
//# sourceMappingURL=8.a2b21504fbb22ac0e02b.js.map