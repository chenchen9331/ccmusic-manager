webpackJsonp([5],{JChv:function(t,e){},SJzn:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i("BO1k"),n=i.n(o),l=i("gyMJ"),a={data:function(){return{visitDialog:!1,visitEditDialog:!1,visitDeleDialog:!1,pojo:{title:"",introduction:"",style:""},editPojo:{id:"",title:"",introduction:"",style:""},dataList:[],searchList:{title:""},currentPage:1,pageSize:5,idx:"-1",multipleSelection:[]}},created:function(){this.getAll()},computed:{data:function(){return this.dataList.slice((this.currentPage-1)*this.pageSize,this.currentPage*this.pageSize)}},mixins:[i("is1l").a],methods:{addSongSheet:function(){var t=this,e=new URLSearchParams;e.append("title",this.pojo.title),e.append("introduction",this.pojo.introduction),e.append("style",this.pojo.style),e.append("pic","/img/songSheetPic/tubiao.jpg"),Object(l.z)(e).then(function(e){2e4==e.code?t.notify(e.message,"success"):t.notify(e.message,"error")}).catch(function(t){console.log(t)}),this.pojo=[],this.visitDialog=!1,this.getAll()},editData:function(t){this.visitEditDialog=!0,this.editPojo={id:t.id,title:t.title,introduction:t.introduction,style:t.style}},editSongSheet:function(){var t=this,e=new URLSearchParams;e.append("id",this.editPojo.id),e.append("title",this.editPojo.title),e.append("introduction",this.editPojo.introduction),e.append("style",this.editPojo.style),Object(l.D)(e).then(function(e){2e4==e.code?(t.notify(e.message,"success"),t.getAll()):t.notify(e.message,"error")}).catch(function(t){console.log(t)}),this.visitEditDialog=!1},searchSongSheet:function(){var t=this,e=new URLSearchParams;e.append("title",this.searchList.title),Object(l.w)(e).then(function(e){2e4==e.code&&(t.dataList=[],t.dataList=e.data)})},getAll:function(){var t=this;this.dataList=[],this.searchList=[],Object(l.h)().then(function(e){t.searchList=e.data,t.dataList=e.data})},uploadUrl:function(t){return this.$store.state.HOST+"/songsheet/updateSongSheetPic?id="+t},handleCurrentChange:function(t){this.currentPage=t},deleSongSheet:function(){var t=this;Object(l.e)(this.idx).then(function(e){2e4==e.code?(t.notify(e.message,"success"),t.visitDeleDialog=!1,t.getAll()):t.notify(e.message,"error")}).catch(function(t){console.log(t)})},deleteAll:function(){var t=this,e=!0,i=!1,o=void 0;try{for(var a,s=n()(this.multipleSelection);!(e=(a=s.next()).done);e=!0){var r=a.value;Object(l.e)(r.id).then(function(e){2e4==e.code?t.notify(e.message,"success"):t.notify(e.message,"error")}).catch(function(t){console.log(t)}),this.multipleSelection=[],this.getAll()}}catch(t){i=!0,o=t}finally{try{!e&&s.return&&s.return()}finally{if(i)throw o}}},songEdit:function(t,e){this.$router.push({path:"/SheetSong",query:{id:t}})}}},s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"table"},[i("div",{staticClass:"container"},[i("el-form",{ref:"searchList",staticClass:"form-search",attrs:{inline:!0,model:t.searchList,"label-width":"60px"}},[i("el-form-item",{attrs:{label:"歌单名称:"}},[i("el-input",{attrs:{placeholder:"请输入标题名称",size:"mini"},model:{value:t.searchList.title,callback:function(e){t.$set(t.searchList,"title",e)},expression:"searchList.title"}})],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.searchSongSheet()}}},[t._v("查询")]),t._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.visitDialog=!0}}},[t._v("添加")]),t._v(" "),i("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(e){return t.deleteAll()}}},[t._v("批量删除")])],1)],1)],1),t._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:t.data,size:"mini"},on:{"selection-change":t.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"40"}}),t._v(" "),i("el-table-column",{attrs:{label:"歌单图片",align:"center",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticClass:"songsheet-img"},[i("img",{staticStyle:{width:"100%"},attrs:{src:t.getUrl(e.row.pic)}})]),t._v(" "),i("el-upload",{attrs:{action:t.uploadUrl(e.row.id),"before-upload":t.beforeUploadAvator,"on-success":t.handleAvatorSuccess}},[i("el-button",{attrs:{size:"mini"}},[t._v("更新图片")])],1)]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"title",label:"标题",width:"120",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{label:"简介"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("p",{staticStyle:{height:"100px",overflow:"hidden"}},[t._v(t._s(e.row.introduction))])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"style",label:"风格",width:"120",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){return t.songEdit(e.row.id)}}},[t._v("歌曲管理")]),t._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){return t.editData(e.row)}}},[t._v("修改")]),t._v(" "),i("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(i){return t.deleData(e.row.id)}}},[t._v("删除")])]}}])})],1),t._v(" "),i("div",{staticClass:"pagination"},[i("el-pagination",{attrs:{background:"",layout:"total,pager,prev,next","current-page":t.currentPage,"page-size":t.pageSize,total:t.dataList.length},on:{"current-change":t.handleCurrentChange}})],1),t._v(" "),i("el-dialog",{attrs:{title:"添加歌单",visible:t.visitDialog,width:"400px",center:""},on:{"update:visible":function(e){t.visitDialog=e}}},[i("el-form",{ref:"pojo",attrs:{model:t.pojo,"label-width":"80px"}},[i("el-form-item",{attrs:{prop:"title",label:"标题",size:"mini"}},[i("el-input",{attrs:{placeholder:"标题"},model:{value:t.pojo.title,callback:function(e){t.$set(t.pojo,"title",e)},expression:"pojo.title"}})],1),t._v(" "),i("el-form-item",{attrs:{prop:"introduction",label:"简介",size:"mini"}},[i("el-input",{attrs:{placeholder:"简介",type:"textarea"},model:{value:t.pojo.introduction,callback:function(e){t.$set(t.pojo,"introduction",e)},expression:"pojo.introduction"}})],1),t._v(" "),i("el-form-item",{attrs:{prop:"style",label:"风格",size:"mini"}},[i("el-input",{attrs:{placeholder:"风格"},model:{value:t.pojo.style,callback:function(e){t.$set(t.pojo,"style",e)},expression:"pojo.style"}})],1)],1),t._v(" "),i("span",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.addSongSheet()}}},[t._v("保存")]),t._v(" "),i("el-button",{attrs:{type:"info"},on:{click:function(e){t.visitDialog=!1}}},[t._v("关闭")])],1)],1),t._v(" "),i("el-dialog",{attrs:{title:"修改歌单",visible:t.visitEditDialog,width:"400px",center:""},on:{"update:visible":function(e){t.visitEditDialog=e}}},[i("el-form",{ref:"editPojo",attrs:{model:t.editPojo,"label-width":"80px"}},[i("el-form-item",{attrs:{prop:"title",label:"标题",size:"mini"}},[i("el-input",{attrs:{placeholder:"标题"},model:{value:t.editPojo.title,callback:function(e){t.$set(t.editPojo,"title",e)},expression:"editPojo.title"}})],1),t._v(" "),i("el-form-item",{attrs:{prop:"introduction",label:"简介",size:"mini"}},[i("el-input",{attrs:{placeholder:"简介",type:"textarea"},model:{value:t.editPojo.introduction,callback:function(e){t.$set(t.editPojo,"introduction",e)},expression:"editPojo.introduction"}})],1),t._v(" "),i("el-form-item",{attrs:{prop:"style",label:"风格",size:"mini"}},[i("el-input",{attrs:{placeholder:"风格"},model:{value:t.editPojo.style,callback:function(e){t.$set(t.editPojo,"style",e)},expression:"editPojo.style"}})],1)],1),t._v(" "),i("span",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.editSongSheet()}}},[t._v("保存")]),t._v(" "),i("el-button",{attrs:{type:"info"},on:{click:function(e){t.visitEditDialog=!1}}},[t._v("关闭")])],1)],1),t._v(" "),i("el-dialog",{attrs:{title:"删除歌单",visible:t.visitDeleDialog,width:"400px",center:""},on:{"update:visible":function(e){t.visitDeleDialog=e}}},[i("div",[t._v("是否确定执行删除操作？")]),t._v(" "),i("span",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"danger"},on:{click:function(e){return t.deleSongSheet()}}},[t._v("是")]),t._v(" "),i("el-button",{attrs:{type:"info"},on:{click:function(e){t.visitEditDialog=!1}}},[t._v("否")])],1)])],1)},staticRenderFns:[]};var r=i("VU/8")(a,s,!1,function(t){i("JChv")},"data-v-cea4d4b8",null);e.default=r.exports}});
//# sourceMappingURL=5.a74ae5faac3aaa423ce5.js.map