webpackJsonp([3],{"1yLI":function(t,e){},"2uCZ":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("BO1k"),a=i.n(n),s=i("is1l"),o=i("gyMJ"),r={data:function(){return{visitDialog:!1,visitDeleDialog:!1,form:{singerName:"",songName:""},dataList:[],searchList:{name:""},currentPage:1,pageSize:5,idx:"-1",multipleSelection:[],songListId:""}},created:function(){this.songListId=this.$route.query.id,this.getAll()},computed:{data:function(){return this.dataList.slice((this.currentPage-1)*this.pageSize,this.currentPage*this.pageSize)}},mixins:[s.a],methods:{getSongId:function(){var t=this,e=t.form.singerName+"-"+t.form.songName;Object(o.q)(e).then(function(e){console.log(e.data.id),t.addSong(e.data.id)})},addSong:function(t){var e=this,i=new URLSearchParams;i.append("songId",t),i.append("songSheetId",this.songListId),Object(o.s)(i).then(function(t){2e4==t.code?(e.getAll(),e.notify("添加成功","success")):e.notify("添加失败","error")}).catch(function(t){console.log(t)}),this.visitDialog=!1},searchSong:function(){var t=this,e=new URLSearchParams;e.append("name",this.searchList.name),getSongByName(e).then(function(e){2e4==e.code&&(t.dataList=[],t.dataList=e.data)})},getAll:function(){var t=this;this.dataList=[],this.searchList=[],Object(o.r)(this.songListId).then(function(e){var i=!0,n=!1,s=void 0;try{for(var o,r=a()(e.data);!(i=(o=r.next()).done);i=!0){var l=o.value;t.getSong(l.songId)}}catch(t){n=!0,s=t}finally{try{!i&&r.return&&r.return()}finally{if(n)throw s}}})},getSong:function(t){var e=this;Object(o.p)(t).then(function(t){e.searchList.push(t.data),e.dataList.push(t.data)}).catch(function(t){console.log(t)})},uploadUrl:function(t){return this.$store.state.HOST+"/song/updateAvator?id="+t},handleCurrentChange:function(t){this.currentPage=t},deleSong:function(){var t=this;Object(o.b)(this.idx,this.songListId).then(function(e){2e4==e.code?(t.notify(e.message,"success"),t.visitDeleDialog=!1,t.getAll()):t.notify(e.message,"error")}).catch(function(t){console.log(t)})},deleteAll:function(){var t=this,e=!0,i=!1,n=void 0;try{for(var s,o=a()(this.multipleSelection);!(e=(s=o.next()).done);e=!0){var r=s.value;deleteSong(r.id).then(function(e){2e4==e.code?t.notify(e.message,"success"):t.notify(e.message,"error")}).catch(function(t){console.log(t)}),this.multipleSelection=[],this.getAll()}}catch(t){i=!0,n=t}finally{try{!e&&o.return&&o.return()}finally{if(i)throw n}}}}},l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"table"},[t._m(0),t._v(" "),i("div",{staticClass:"container"},[i("el-form",{ref:"searchList",staticClass:"form-search",attrs:{inline:!0,model:t.searchList,"label-width":"60px"}},[i("el-form-item",{attrs:{label:"歌曲名称:"}},[i("el-input",{attrs:{placeholder:"请输入歌曲名称",size:"mini"},model:{value:t.searchList.name,callback:function(e){t.$set(t.searchList,"name",e)},expression:"searchList.name"}})],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.searchSong()}}},[t._v("查询")]),t._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.visitDialog=!0}}},[t._v("添加")]),t._v(" "),i("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(e){return t.deleteAll()}}},[t._v("批量删除")])],1)],1)],1),t._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:t.data,size:"mini"},on:{"selection-change":t.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"40"}}),t._v(" "),i("el-table-column",{attrs:{label:"歌手-歌名",prop:"name",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{label:"操作",align:"center",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(i){return t.deleData(e.row.id)}}},[t._v("删除")])]}}])})],1),t._v(" "),i("div",{staticClass:"pagination"},[i("el-pagination",{attrs:{background:"",layout:"total,pager,prev,next","current-page":t.currentPage,"page-size":t.pageSize,total:t.dataList.length},on:{"current-change":t.handleCurrentChange}})],1),t._v(" "),i("el-dialog",{attrs:{title:"添加歌曲",visible:t.visitDialog,width:"400px",center:""},on:{"update:visible":function(e){t.visitDialog=e}}},[i("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px",action:"",id:"tf"}},[i("el-form-item",{attrs:{prop:"singerName",label:"歌手名称",size:"mini"}},[i("el-input",{attrs:{placeholder:"歌手名称"},model:{value:t.form.singerName,callback:function(e){t.$set(t.form,"singerName",e)},expression:"form.singerName"}})],1),t._v(" "),i("el-form-item",{attrs:{prop:"songName",label:"歌曲名称",size:"mini"}},[i("el-input",{attrs:{placeholder:"歌曲名称"},model:{value:t.form.songName,callback:function(e){t.$set(t.form,"songName",e)},expression:"form.songName"}})],1)],1),t._v(" "),i("span",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"mini"},on:{click:function(e){t.visitDialog=!1}}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.getSongId()}}},[t._v("确定")])],1)],1),t._v(" "),i("el-dialog",{attrs:{title:"删除歌曲",visible:t.visitDeleDialog,width:"400px",center:""},on:{"update:visible":function(e){t.visitDeleDialog=e}}},[i("div",[t._v("是否确定执行删除操作？")]),t._v(" "),i("span",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"danger"},on:{click:function(e){return t.deleSong()}}},[t._v("是")]),t._v(" "),i("el-button",{attrs:{type:"info"},on:{click:function(e){t.visitEditDialog=!1}}},[t._v("否")])],1)])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"crumbs"},[e("i",{staticClass:"el-icon-tickets"}),this._v("\n        歌单-歌曲信息\n    ")])}]};var c=i("VU/8")(r,l,!1,function(t){i("1yLI")},"data-v-ee5c2e4e",null);e.default=c.exports}});
//# sourceMappingURL=3.afa52de3f30f9c62e8b2.js.map